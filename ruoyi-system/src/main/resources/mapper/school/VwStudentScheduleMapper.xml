<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.school.mapper.VwStudentScheduleMapper">

    <resultMap type="com.ruoyi.school.domain.VwStudentSchedule" id="VwStudentScheduleResult">
        <id     property="id"            column="id" />
        <result property="studentId"     column="student_id" />
        <result property="studentName"   column="student_name" />
        <result property="courseId"      column="course_id" />
        <result property="courseName"    column="course_name" />
        <result property="teacherId"     column="teacher_id" />
        <result property="teacherName"   column="teacher_name" />
        <result property="semester"      column="semester" />
        <result property="classTime"     column="class_time" />
        <result property="classPlace"    column="class_place" />
        <result property="status"        column="status" />
        <result property="isSelected"    column="is_selected" />
        <result property="createTime"    column="create_time" />
        <result property="updateTime"    column="update_time" />
    </resultMap>

    <sql id="selectVwStudentScheduleVo">
        select id, student_id, student_name, course_id, course_name, teacher_id, teacher_name,
               semester, class_time, class_place, status, is_selected, create_time, update_time
        from vw_student_schedule
    </sql>

    <select id="selectVwStudentScheduleList" parameterType="com.ruoyi.school.domain.VwStudentSchedule" resultMap="VwStudentScheduleResult">
        <include refid="selectVwStudentScheduleVo" />
        <where>
            <if test="studentId != null and studentId != ''"> and student_id = #{studentId}</if>
            <if test="studentName != null and studentName != ''"> and student_name like concat('%', #{studentName}, '%')</if>
            <if test="courseId != null and courseId != ''"> and course_id = #{courseId}</if>
            <if test="courseName != null and courseName != ''"> and course_name like concat('%', #{courseName}, '%')</if>
            <if test="teacherId != null and teacherId != ''"> and teacher_id = #{teacherId}</if>
            <if test="teacherName != null and teacherName != ''"> and teacher_name like concat('%', #{teacherName}, '%')</if>
            <if test="semester != null and semester != ''"> and semester = #{semester}</if>
            <if test="classTime != null and classTime != ''"> and class_time like concat('%', #{classTime}, '%')</if>
            <if test="classPlace != null and classPlace != ''"> and class_place like concat('%', #{classPlace}, '%')</if>
            <if test="status != null"> and status = #{status}</if>
        </where>
    </select>

    <select id="selectVwStudentScheduleById" parameterType="Long" resultMap="VwStudentScheduleResult">
        <include refid="selectVwStudentScheduleVo" />
        where id = #{id}
    </select>
</mapper>
